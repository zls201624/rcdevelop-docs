# RepChain版本更新说明

## [v1.1.0](v1.1.0/)
1. 支持OpenJDK(使用13)
    * 推荐使用zulu社区版
2. 依赖组件升级 
3. 组网成员在线增加/删除（节点离网入网时，系统能很快更新节点视图，保证出块不受影响） 
    * 节点由于网络故障离线，剩余节点出块不受影响，在网络恢复情况下，节点不需经过人工干预重启即可重新加入到网中，节点恢复加入后，可以继续工作。
    * 节点由于崩溃性故障，需要人工干预重启，节点重启恢复加入后，可以继续工作。
4. 共识层抽象和更多的共识算法实现 
    * CFRD
    * PBFT
    * RAFT
5. 数据前向兼容 
    * 假设系统更新时，Block数据结构**追加**了新的字段，新的系统代码处理和Block相关的逻辑时，可根据version来做分别的处理，以保证系统对上一个版本的数据可读可处理。
6. 存储层抽象 
    * 针对不同的共识协议，进行抽象

## [v1.0.0](v1.0.0/)
1. Protobuf定义
    - 相对于第一版进行了精简，系统字段所占空间大幅减少
    - 块结构体加入了高度，方便用户同步数据
    - 新增部分字段用于支持新增的合约功能
2. 合约模块升级
    - 生命周期更完善
      - depoy 
        部署合约的时候，支持合约使用别名，以及指定版本号，支持用户的升级，允许合约部署指定其在invoke时采用并行方式/串行方式执行
      - invoke 
        通过合约别名和指定版本号，即可调用相应合约，增加了对并行invoke合约方法的支持
      - setState 
        支持合约的禁用，启用，相应状态在该条交易入块之后生效
    - 引入法律描述
      支持合约的开发者，在合约中对合约的执行流程以及结果进行法律描述，用于责任的界定。
    - 不再返回预执行结果给合约调用方，只返回执行是否成功调用
    - 一律采用Scala语言作为合约脚本，不再支持Javascript合约脚本
    - 支持跨合约读取KV
    - 底层接口引入日志，即合约开发人员也可以将日志引入到合约中
2. TPS的提升
   - 320 -> 680 提升1倍多
3. 日志模块
   - 日志分级
     业务日志与系统日志分开管理，可根据业务需要进行配置
4. 账户和证书管理
   - 账户证书分离
     账户和证书分开管理，通过对应的credit_code来进行关联，一个账户可以拥有多证书
5. 系统效率、稳健性的提升
   - 对块与交易大小在API层进行限制，避免无效交易造成算力浪费。
   - 对节点之间方案进行了重新设计，同步更稳健。
   - 背书、共识、出块进一步细粒度并行化，执行效率更高。
   - 代码中在对非Protobuf对象进行序列化时，采用更高效的序列化实现。
   - 系统启动时加入了数据自检，对块的完整性进行检查。
6. 使用最新稳定版本的scala2.12和akka2.5.22，其他依赖库也进行了更新
7. 配置文件相对于上一版进行了改动
8. 测试用例更丰富完善
9. 优化了存储、同步等，解决了部分bug

